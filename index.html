<!DOCTYPE html>
<html lang="en">
<head>
	<!--Meta-->
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<!--Title-->
	<title>nonces</title>
	<!--CSS-->
	<link rel="stylesheet" href="css/main-blue.css" id="color-switcher">
	<link rel="stylesheet" href="css/font-awesome.min.css">
	<link rel="stylesheet" href="css/jquery.mCustomScrollbar.min.css">
	<!--Favicon-->
	<link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
	<!--Fonts-->
	<link href="https://fonts.googleapis.com/css?family=Montserrat|Open+Sans|Raleway|Righteous" rel="stylesheet">
	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-44429386-4"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());

	  gtag('config', 'UA-44429386-4');
	</script>
</head>
<body>
	<!--Hero-->
	<div class="hero" id="particles-js">
		<div class="centered">
			<img class="logo" src="img/logo.png" alt="nonce">
			<h1 class="title">nonces</h1>
			<h2 class="heading">Cryptocurrency</h2>
                        <h2 class="heading">Lotteries</h2>
			<p class="description">The winning block will be mined in approximately</p>
			<div class="countdown" id="countdown"></div>
                        <p class="description">Estimated jackpot is</p>
                        <div class="jackpot"><div class="jackpot-box"><h2 class="jackpot-num">20</h2><h4 class="jackpot-coin">ETN</h4></div></div>
			<div class="buttons">
				<a id="know-more-button" href="#" class="button btn-round btn-solid">How it works</a>
				<a id="subscribe-button" href="#" class="button btn-round btn-ghost">How to enter</a>
			</div>
		</div>
		<div class="social-text">
			<a href="https://discord.gg/ZH7dHu">Discord</a>
			<a href="#">Twitter</a>
		</div>
		<div class="modal modal-subscirbe" id="subscribe-modal">
			<div class="content">
				<h2>How to enter the lottery</h2>
				<p>Send exactly one ETN to the address below, along a payment id. Enter your nonce guess below and a properly padded payment id will be generated for you. If you send more than one ETN, anything extra will be included into the jackpot. If you send less than one ETN, your payment will be included in the jackpot, but your guess will not count. One transaction per entry.</p>
				<form id="mc-form" class="subscribe-form subscribe-split">
                                        <input id="etn-address" style="text-align:center;" value="etnkCiobPBDjDNSFY3LvvxcxbU1MSGMaXZLpvGNLsDYuezmYegfjESQNGPaFdff1fNdXoUak96T1RQJyQRwSAKvK1X5UjLdeMR">
                                        <input class="btn-solid" type="submit" value="Copy Address" data-clipboard-target="#etn-address">
					<label class="response" for="etn-address">Lottery Address Copied</label>
                                </form>
                                <form id="mc-form1" class="subscribe-form1 subscribe-split">
                                        <input type="text" style="text-align:center;" id="custom-id-input" value="Enter your nonce guess here">
                                        <input id="custom-id-value" style="text-align:center;" readonly>
                                        <input class="btn-solid" type="submit" value="Copy Generated Payment ID" data-clipboard-target="#custom-id-value">
					<label class="response1" for="payment-id">Generated Payment ID Copied</label>
				</form>
			</div>
			<div class="exit" id="subscribe-close">+</div>
		</div>
	</div>
	<!--More-->
	<div class="more" id="more" data-mcs-theme="minimal-dark">
		<div class="exit" id="more-close">+</div>
		<h1 class="more-heading">Rules</h1>
		<p class="more-description">Guess the nonce of the first block mined with a timestamp after Sunday at 22:00 UTC. To win you must guess the exact nonce or have the guess closest to the winning nonce. In the event of a tie, the jackpot will be equally distributed amongst winning addresses. The winning transactions will be posted, and must be proven by the sender. Once a winning transaction has been proven the payment will be send the next business day. Once this block is mined, the jackpot will reset and any submissions recieved after will be included in the next lottery.</p>
		<h1 class="more-heading">Security</h1>
                <p class="more-description">The jackpot coins are stored in a cold wallet, not connected to the internet. Once the winning addresses have been identified, it will be transfered into a hot wallet and the payments will be made. The wallet will then be transfered back to cold storage.</p>
                <h1 class="more-heading">Fees</h1>
                <p class="more-description">There will be a 10% fee collected from each jackpot for transaction fees, hosting costs, and development.</p>
	</div>
	<!--Overlay-->
	<div class="overlay" id="overlay"></div>
	<!--Scripts-->
	<script src="js/jquery-3.1.1.min.js"></script>
	<script src="js/jquery.ajaxchimp.min.js"></script>
	<script src="js/jquery.countdown.min.js"></script>
	<script src="js/jquery.mCustomScrollbar.min.js"></script>
	<script src="js/config.js"></script>
	<script src="js/particles.min.js"></script>
	<script src="js/main.js"></script>
        <script src="js/clipboard.min.js"></script>
        <script>
        var clipboard = new ClipboardJS('.btn-solid');

        clipboard.on('success', function(e) {
            console.log(e);
        });

         clipboard.on('error', function(e) {
            console.log(e);
        });
        </script>
        <script>
        'use strict';

        function addEvent(el, type, handler) {
            if (el.attachEvent) el.attachEvent('on'+type, handler); else el.addEventListener(type, handler);
        }

		var paymentIdgen = function() {

			var obj = {};

      function ascii_to_hexa(str)
      {
        // from https://www.w3resource.com/javascript-exercises/javascript-string-exercise-27.php
      	var arr1 = [];
      	for (var n = 0, l = str.length; n < l; n ++)
           {
      		var hex = Number(str.charCodeAt(n)).toString(16);
      		arr1.push(hex);
      	 }
      	return arr1.join('');
       }


			function mn_random(bits) {
          // from mymonero.com

			    if (bits % 32 !== 0) throw "Something weird went wrong: Invalid number of bits - " + bits;
			    var array = new Uint32Array(bits / 32);

			    var i = 0;

			    function arr_is_zero() {
			        for (var j = 0; j < bits / 32; ++j) {
			            if (array[j] !== 0) return false;
			        }
			        return true;
			    }

			    do {
			        /// Doing this in the loop is chunky, blame Microsoft and the in-flux status of the window.crypto standard
			        if (typeof window !== 'undefined' && window.crypto && window.crypto.getRandomValues) {
			            window.crypto.getRandomValues(array);
			        } else if (typeof window !== 'undefined' && typeof window.msCrypto === 'object' && typeof window.msCrypto.getRandomValues === 'function') {
			            window.msCrypto.getRandomValues(array);
			        } else {
			            throw "Unfortunately MyMonero only runs on browsers that support the JavaScript Crypto API";
			        }

			        ++i;
			    } while (i < 5 && arr_is_zero());
			    if (arr_is_zero()) {
			        throw "Something went wrong and we could not securely generate random data for your account";
			    }
			    // Convert to hex
			    var out = '';
			    for (var j = 0; j < bits / 32; ++j) {
			        out += ('0000000' + array[j].toString(16)).slice(-8);
			    }
			    return out;
			}


        function strpad(org_str, padString, length)
        {   // from http://stackoverflow.com/a/10073737/248823
            var str = org_str;
            while (str.length < length)
                str = padString + str;
            return str;
        };

			obj.paymnet_id_hex = '';

			obj.generateRandomPaymentID = function() {
				obj.paymnet_id_hex = mn_random(256);
			}

      obj.generateCustomID = function(evt, inputElem) {
        obj.paymnet_id_hex = strpad(evt.target.value, "0", 64);
        obj.updatedPaymentIDDisply(inputElem);
      }

			obj.updatedPaymentIDDisply = function(inputElem) {

        var payment_id = obj.paymnet_id_hex;

        if (!/^[0-9]+$/.test(payment_id)) {
             inputElem.value = "Nonce guesses must only be integers";
             return;
        }

        if (payment_id.length < 64) {
            payment_id = strpad(payment_id, "0", 64);
        } else if (payment_id.length > 64) {
            payment_id = "Generated payment ID too long";
        }

	      inputElem.value = payment_id;
			}


			return obj;
		}

		window.onload = (function (oldOnLoad) {
		    return function () {
		      if (oldOnLoad) {
		        olOnLoad();  //fire old Onload event that was attached if any.
		      }

          var randomIdValue = document.getElementById("random-id-value");
          var customIdValue = document.getElementById("custom-id-value");
          var asciiIdValue  = document.getElementById("ascii-id-value");

		      var payID = new paymentIdgen();

          addEvent(document.getElementById("custom-id-input") , 'keyup',
              function(evt) {payID.generateCustomID(evt, customIdValue)});

		    }
		  })(window.onload);
        </script>
</body>
</html>
